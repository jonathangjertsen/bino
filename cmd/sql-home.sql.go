// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: sql-home.sql

package main

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const addHomeUnavailablePeriod = `-- name: AddHomeUnavailablePeriod :one
INSERT INTO home_unavailable (home_id, from_date, to_date, note)
VALUES ($1, $2, $3, $4)
RETURNING id
`

type AddHomeUnavailablePeriodParams struct {
	HomeID   int32
	FromDate pgtype.Date
	ToDate   pgtype.Date
	Note     pgtype.Text
}

func (q *Queries) AddHomeUnavailablePeriod(ctx context.Context, arg AddHomeUnavailablePeriodParams) (int32, error) {
	row := q.db.QueryRow(ctx, addHomeUnavailablePeriod,
		arg.HomeID,
		arg.FromDate,
		arg.ToDate,
		arg.Note,
	)
	var id int32
	err := row.Scan(&id)
	return id, err
}

const addPreferredSpecies = `-- name: AddPreferredSpecies :exec
INSERT INTO home_preferred_species (
  home_id,
  species_id
) VALUES (
  $1,
  $2
)
`

type AddPreferredSpeciesParams struct {
	HomeID    int32
	SpeciesID int32
}

func (q *Queries) AddPreferredSpecies(ctx context.Context, arg AddPreferredSpeciesParams) error {
	_, err := q.db.Exec(ctx, addPreferredSpecies, arg.HomeID, arg.SpeciesID)
	return err
}

const addUserToHome = `-- name: AddUserToHome :exec
INSERT INTO home_appuser (home_id, appuser_id)
VALUES ($1, $2)
`

type AddUserToHomeParams struct {
	HomeID    int32
	AppuserID int32
}

func (q *Queries) AddUserToHome(ctx context.Context, arg AddUserToHomeParams) error {
	_, err := q.db.Exec(ctx, addUserToHome, arg.HomeID, arg.AppuserID)
	return err
}

const deleteHomeUnavailablePeriod = `-- name: DeleteHomeUnavailablePeriod :exec
DELETE
FROM home_unavailable
WHERE id = $1
`

func (q *Queries) DeleteHomeUnavailablePeriod(ctx context.Context, id int32) error {
	_, err := q.db.Exec(ctx, deleteHomeUnavailablePeriod, id)
	return err
}

const deletePreferredSpecies = `-- name: DeletePreferredSpecies :exec
DELETE FROM home_preferred_species
WHERE home_id    = $1
  AND species_id = $2
`

type DeletePreferredSpeciesParams struct {
	HomeID    int32
	SpeciesID int32
}

func (q *Queries) DeletePreferredSpecies(ctx context.Context, arg DeletePreferredSpeciesParams) error {
	_, err := q.db.Exec(ctx, deletePreferredSpecies, arg.HomeID, arg.SpeciesID)
	return err
}

const getAllUnavailablePeriods = `-- name: GetAllUnavailablePeriods :many
SELECT id, home_id, from_date, to_date, note
FROM home_unavailable
WHERE to_date + INTERVAL '1 DAY' >= NOW()
ORDER BY home_id, to_date
`

func (q *Queries) GetAllUnavailablePeriods(ctx context.Context) ([]HomeUnavailable, error) {
	rows, err := q.db.Query(ctx, getAllUnavailablePeriods)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []HomeUnavailable
	for rows.Next() {
		var i HomeUnavailable
		if err := rows.Scan(
			&i.ID,
			&i.HomeID,
			&i.FromDate,
			&i.ToDate,
			&i.Note,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getHome = `-- name: GetHome :one
SELECT id, name, capacity, note FROM home
WHERE id = $1
`

func (q *Queries) GetHome(ctx context.Context, id int32) (Home, error) {
	row := q.db.QueryRow(ctx, getHome, id)
	var i Home
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Capacity,
		&i.Note,
	)
	return i, err
}

const getHomeUnavailablePeriods = `-- name: GetHomeUnavailablePeriods :many
SELECT id, home_id, from_date, to_date, note
FROM home_unavailable
WHERE home_id = $1
  AND to_date + INTERVAL '1 DAY' >= NOW()
ORDER BY to_date
`

func (q *Queries) GetHomeUnavailablePeriods(ctx context.Context, homeID int32) ([]HomeUnavailable, error) {
	rows, err := q.db.Query(ctx, getHomeUnavailablePeriods, homeID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []HomeUnavailable
	for rows.Next() {
		var i HomeUnavailable
		if err := rows.Scan(
			&i.ID,
			&i.HomeID,
			&i.FromDate,
			&i.ToDate,
			&i.Note,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getHomes = `-- name: GetHomes :many
SELECT id, name, capacity, note FROM home
ORDER BY name
`

func (q *Queries) GetHomes(ctx context.Context) ([]Home, error) {
	rows, err := q.db.Query(ctx, getHomes)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Home
	for rows.Next() {
		var i Home
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Capacity,
			&i.Note,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getHomesForUser = `-- name: GetHomesForUser :many
SELECT h.id, h.name, h.capacity, h.note FROM home_appuser AS ha
INNER JOIN home AS h
  ON h.id = ha.home_id
WHERE appuser_id = $1
`

func (q *Queries) GetHomesForUser(ctx context.Context, appuserID int32) ([]Home, error) {
	rows, err := q.db.Query(ctx, getHomesForUser, appuserID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Home
	for rows.Next() {
		var i Home
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Capacity,
			&i.Note,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getPreferredSpecies = `-- name: GetPreferredSpecies :many
SELECT hps.home_id, sl.species_id, sl.name FROM home_preferred_species AS hps
JOIN species_language AS sl USING (species_id)
WHERE language_id = $1
`

type GetPreferredSpeciesRow struct {
	HomeID    int32
	SpeciesID int32
	Name      string
}

func (q *Queries) GetPreferredSpecies(ctx context.Context, languageID int32) ([]GetPreferredSpeciesRow, error) {
	rows, err := q.db.Query(ctx, getPreferredSpecies, languageID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetPreferredSpeciesRow
	for rows.Next() {
		var i GetPreferredSpeciesRow
		if err := rows.Scan(&i.HomeID, &i.SpeciesID, &i.Name); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getPreferredSpeciesForHome = `-- name: GetPreferredSpeciesForHome :many
SELECT hps.species_id, sl.name FROM home_preferred_species AS hps
JOIN species_language AS sl USING(species_id)
WHERE hps.home_id = $1
  AND sl.language_id = $2
ORDER BY hps.sort_order ASC, hps.species_id ASC
`

type GetPreferredSpeciesForHomeParams struct {
	HomeID     int32
	LanguageID int32
}

type GetPreferredSpeciesForHomeRow struct {
	SpeciesID int32
	Name      string
}

func (q *Queries) GetPreferredSpeciesForHome(ctx context.Context, arg GetPreferredSpeciesForHomeParams) ([]GetPreferredSpeciesForHomeRow, error) {
	rows, err := q.db.Query(ctx, getPreferredSpeciesForHome, arg.HomeID, arg.LanguageID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetPreferredSpeciesForHomeRow
	for rows.Next() {
		var i GetPreferredSpeciesForHomeRow
		if err := rows.Scan(&i.SpeciesID, &i.Name); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getUnavailablePeriodsInRange = `-- name: GetUnavailablePeriodsInRange :many
SELECT hu.id, hu.home_id, hu.from_date, hu.to_date, hu.note, h.name
FROM home_unavailable AS hu
INNER JOIN home AS h
  ON hu.home_id = h.id
WHERE from_date <= $1
  AND to_date >= $2
`

type GetUnavailablePeriodsInRangeParams struct {
	RangeEnd   pgtype.Date
	RangeBegin pgtype.Date
}

type GetUnavailablePeriodsInRangeRow struct {
	ID       int32
	HomeID   int32
	FromDate pgtype.Date
	ToDate   pgtype.Date
	Note     pgtype.Text
	Name     string
}

func (q *Queries) GetUnavailablePeriodsInRange(ctx context.Context, arg GetUnavailablePeriodsInRangeParams) ([]GetUnavailablePeriodsInRangeRow, error) {
	rows, err := q.db.Query(ctx, getUnavailablePeriodsInRange, arg.RangeEnd, arg.RangeBegin)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetUnavailablePeriodsInRangeRow
	for rows.Next() {
		var i GetUnavailablePeriodsInRangeRow
		if err := rows.Scan(
			&i.ID,
			&i.HomeID,
			&i.FromDate,
			&i.ToDate,
			&i.Note,
			&i.Name,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertHome = `-- name: InsertHome :exec
INSERT INTO home (name)
VALUES ($1)
`

func (q *Queries) InsertHome(ctx context.Context, name string) error {
	_, err := q.db.Exec(ctx, insertHome, name)
	return err
}

const removeUserFromHome = `-- name: RemoveUserFromHome :exec
DELETE FROM home_appuser
WHERE home_id = $1
  AND appuser_id = $2
`

type RemoveUserFromHomeParams struct {
	HomeID    int32
	AppuserID int32
}

func (q *Queries) RemoveUserFromHome(ctx context.Context, arg RemoveUserFromHomeParams) error {
	_, err := q.db.Exec(ctx, removeUserFromHome, arg.HomeID, arg.AppuserID)
	return err
}

const setHomeCapacity = `-- name: SetHomeCapacity :exec
UPDATE home
SET capacity = $2
WHERE id = $1
`

type SetHomeCapacityParams struct {
	ID       int32
	Capacity int32
}

func (q *Queries) SetHomeCapacity(ctx context.Context, arg SetHomeCapacityParams) error {
	_, err := q.db.Exec(ctx, setHomeCapacity, arg.ID, arg.Capacity)
	return err
}

const setHomeNote = `-- name: SetHomeNote :exec
UPDATE home
SET note = $2
WHERE id = $1
`

type SetHomeNoteParams struct {
	ID   int32
	Note string
}

func (q *Queries) SetHomeNote(ctx context.Context, arg SetHomeNoteParams) error {
	_, err := q.db.Exec(ctx, setHomeNote, arg.ID, arg.Note)
	return err
}

const updateHomeName = `-- name: UpdateHomeName :exec
UPDATE home
SET name = $2
WHERE id = $1
`

type UpdateHomeNameParams struct {
	ID   int32
	Name string
}

func (q *Queries) UpdateHomeName(ctx context.Context, arg UpdateHomeNameParams) error {
	_, err := q.db.Exec(ctx, updateHomeName, arg.ID, arg.Name)
	return err
}

const updateHomeUnavailableFrom = `-- name: UpdateHomeUnavailableFrom :exec
UPDATE home_unavailable
SET from_date = $2
WHERE id = $1
`

type UpdateHomeUnavailableFromParams struct {
	ID       int32
	FromDate pgtype.Date
}

func (q *Queries) UpdateHomeUnavailableFrom(ctx context.Context, arg UpdateHomeUnavailableFromParams) error {
	_, err := q.db.Exec(ctx, updateHomeUnavailableFrom, arg.ID, arg.FromDate)
	return err
}

const updateHomeUnavailableNote = `-- name: UpdateHomeUnavailableNote :exec
UPDATE home_unavailable
SET note = $2
WHERE id = $1
`

type UpdateHomeUnavailableNoteParams struct {
	ID   int32
	Note pgtype.Text
}

func (q *Queries) UpdateHomeUnavailableNote(ctx context.Context, arg UpdateHomeUnavailableNoteParams) error {
	_, err := q.db.Exec(ctx, updateHomeUnavailableNote, arg.ID, arg.Note)
	return err
}

const updateHomeUnavailableTo = `-- name: UpdateHomeUnavailableTo :exec
UPDATE home_unavailable
SET to_date = $2
WHERE id = $1
`

type UpdateHomeUnavailableToParams struct {
	ID     int32
	ToDate pgtype.Date
}

func (q *Queries) UpdateHomeUnavailableTo(ctx context.Context, arg UpdateHomeUnavailableToParams) error {
	_, err := q.db.Exec(ctx, updateHomeUnavailableTo, arg.ID, arg.ToDate)
	return err
}

const updatePreferredSpeciesSortOrder = `-- name: UpdatePreferredSpeciesSortOrder :exec
UPDATE home_preferred_species as hps
SET sort_order = v.sort_order
FROM (
  SELECT UNNEST($2::int[]) AS id,
         UNNEST($3::int[]) AS sort_order
) AS v
WHERE hps.species_id = v.id
  AND hps.home_id = $1
`

type UpdatePreferredSpeciesSortOrderParams struct {
	HomeID    int32
	SpeciesID []int32
	Orders    []int32
}

func (q *Queries) UpdatePreferredSpeciesSortOrder(ctx context.Context, arg UpdatePreferredSpeciesSortOrderParams) error {
	_, err := q.db.Exec(ctx, updatePreferredSpeciesSortOrder, arg.HomeID, arg.SpeciesID, arg.Orders)
	return err
}
